
<h1> 중앙처리장치(CPU) 작동 원리 </h1>

CPU는 컴퓨터의 가장 핵심적인 역할을 수행하는 인간의 두뇌에 해당한다.<br>
CPU는 메모리에 저장된 명령어를 읽어 들이고, 읽어 들인 명령어를 해석하고, 저장 및 실행하는 부품이다.

<h3> 트랜지스터 </h3>

전압을 걸어주면 전류가 흐른다.
트랜지스터의 조합으로 AND게이트 / OR게이트 / NOT게이트 / XOR게이트 등의 논리 구조를 만들 수 있다.<br>
이들의 조합으로 트랜지스터를 이용해 논리 회로를 구축한다.<br><br>
Mosfet 이라 불리는 엄청 작은 트랜지스터들이 모여 연산을 수행 -> CPU를 구성

![컴퓨터 구조와 시스템버스](https://github.com/hajaeryul/git-study/assets/113097210/cfcb8156-36ad-4d82-b17b-04b604710a96)

CPU는 크게 제어 장치, 연산 장치(ALU), 레지스터 와 각 구성 요소를 연결하는 내부 버스로 구성되어 있다.

<h2> 제어 장치 </h2>

명령어 레지스터에 있는 명령어를 받아 해석하고 해석될 명령을 각 시스템이 수행하도록 지시한다.<br>
클럭(clock, 컴퓨터에서 특정한 간격으로 반복되는 신호) 신호를 받아들인다.<br>
- 클럭<br>
  cpu에서 연산 작업을 처리하는 속도이다. 단위는 Hz <br>
  0과 1의 구분을 초당 몇 회 수행하는지 나타내는 수치로 1GHz : 초당 10억회

<h2> ALU(Arithmetic Logic Unit, 산술논리장치) </h2>
산술, 논리 연산을 실행한다.

<h2> 레지스터 </h2>

CPU내부에서 데이터를 일시적으로 저장, 속도가 가장 빠르지만 용량이 작다.<br>
레지스터는 메모리 계층의 최상위에 위치하며 가장 빠른 속도로 접근 가능한 메모리

- PC(프로그램 카운터)<br>
  다음에 수행할 메모리의 주소가 들어있다.

- MAR(메모리 주소 레지스터)<br>
  프로그램 카운터에서 수행할 주소를 넘겨받은 다음에, 그 주소를 찾아가 데이터를 가져오는 역할을 한다.

- MBR(메모리 버퍼 레지스터)<br>
  메모리 주소 레지스터가 가져온 내용들을 일시적으로 저장 <br>
  명령은 명령어 레지스터로, 연산에 사용될 데이터는 누산기 레지스터로 이동

- IR(명령어 레지스터)<br>
  명령어에 관한 데이터가 저장

- AC(누산기)<br>
  연산의 결과 값이나 중간 값을 일시적으로 저장 <br>
  최종 결과는 메모리 버퍼 레지스터를 통해 메모리로 전송.

- 플래그 레지스터<br>
  ALU의 연산 결과를 플래그 레지스터에 저장함으로써, 추가적인 상태 정보(플래그) 제공한다.<br>
  이는 연산 결과가 양수인지 음수인지 오버 플로우(연산 결과가 레지스터 용량 초과) 발생했는지를 저장

  <h2> CPU의 동작 과정 </h2>

  CPU의 연산 순서는 Fetch -> Decode -> Execute -> Writeback 으로 이루어지며 각 과정의 설명은 다음과 같다.

  1. Fetch(인출) : 메모리상의 프로그램 카운터(PC)가 가리키는 명령어를 CPU로 인출하여 적재

  2. Decode(해석) : 명령어의 해석. 이 단계에서 명령어의 종류와 타겟 등을 판단한다.

  3. Execute(실행) : 해석된 명령어에 따라 데이터에 대한 연산을 수행한다.

  4. Writeback(쓰기) : 명령어대로 처리 완료된 데이터를 메모리에 기록한다.

<h3> 명령어 세트란? </h3>
CPU가 실행할 명령어의 집합이다.<br>
우리가 사용하는 소프트웨어는 명령어와 데이터의 집합<br>
연산 코드(Operation Code) + 피연산자(Operand)로 이루어진다.<br>
명령어 - 6비트 / 값 - 10비트 → 총 16비트<br>

램은 8비트씩 저장되기 때문에 두 줄로 저장한다.(운영체제는 메모리 주소를 1바이트 단위로 관리)<br>
두 줄이 프로세서가 한 번에 처리할 수 있는 값이다.


<h3> 명령어 처리 과정에 대한 자세한 설명 </h3>

  - 인출(Fetch)  단계 (메모리의 데이터 → CPU)<br>
    프로그램 카운터에 가져와야 할 메모리의 주소가 있다 → 메모리 주소 레지스터 → 주소를 가져와 메모리 버퍼 레지스터에 저장
    
  - 해석(Decode) 단계<br>
    LOAD [10]은 10번 주소에 있는 값을 가져오라는 명령이기 때문에 명령어 레지스터로 이동<br>
    다음 수행할 메모리는 전에 주소보다 두 칸 아래 있기 때문에(16비트 기준)<br>
    16비트 프로세서는 PC값 2 증가 , <br>
    32비트 프로세서는 PC값 4 증가  <br>
    명령어 레지스터 → 제어 장치에서 해석
    
  - 실행(Excute) 단계<br>
    메모리 주소 레지스터에 해당 주소가 입력되고 해당 주소의 데이터를 읽어와 메모리 버퍼 레지스터에 저장, 명령어가 아니기 때문에 누산기에 저장<br>
    산술/논리 명령어가 있으면 누산기에 저장된 데이터 → ALU로 전달<br>
    ALU에서 처리되고 결과값이 누산기에 저장<br>
    
  - 저장,쓰기(Writeback) 단계<br>
    누산기에 저장된 데이터는 메모리 버퍼 레지스터를 통해 해당 주소의 메모리에 저장되면서 프로그램 완료.

<h2> 문제 </h2>
  1. 현재 수행중에 있는 명령어 코드(code)를 저장하고 있는 임시 저장 장치는?
    
    가. 인덱스 레지스터(Index register)
    
    나. 명령 레지스터(Instruction register)
    
    다. 누산기(Accumulator)
    
    라. 메모리 레지스터(Memory register)
    
  2. 중앙처리장치(CPU)의 기능을 설명한 것으로 옳지 않은 것은?
    
    가. 작업을 감독하는 기능 수행
    
    나. 산술연산, 논리연산을 수행
    
    다. 프로그램과 데이터를 저장하는 기능 수행
    
    라. 원시프로그램을 목적프로그램으로 변환하는 기능 수행
    
  3. 일반적으로 컴퓨터의 CPU에서 하나의 명령어를 실행하기 위하여 이루어지는 동작 단계를 바르게 나열한 것은? (나)
    
    가. fetch cycle→instruction decoding cycle→write-back 작업→명령어 실행단계
    
    나. fetch cycle→instruction decoding cycle→명령어 실행단계→write-back 작업
    
    다. fetch cycle→명령어 실행단계→write-back 작업→instruction decoding cycle
    
    라. instruction decoding cycle→fetch cycle→명령어 실행단계→write-back 작업
    
  4. 레지스터 중 Program Counter의 기능을 바르게 설명한 것은?
    
    가. 현재 실행중인 명령어의 내용을 기억한다.
    
    나. 주기억장치의 번지를 기억한다.
    
    다. 다음에 수행할 명령어의 번지를 기억한다.
    
    라. 연산의 결과를 일시적으로 보관한다.



<br><br><br>이미지 출처 : https://hongong.hanbit.co.kr/컴퓨터의-4가지-핵심-부품cpu-메모리-보조기억장/


