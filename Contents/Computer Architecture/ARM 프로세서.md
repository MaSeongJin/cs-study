
## ARM 프로세서

<br>

*프로세서란?*

 메모리에 저장된 명령어들을 실행하는 유한 상태 오토마톤 = CPU

<br>

##### ARM : Advanced RISC Machine

즉, 진보된 RISC 기기의 약자로 ARM의 핵심은 RISC이다.

RISC : Reduced Instruction Set Computing (감소된 명령 집합 컴퓨팅)

단순한 명령 집합을 가진 프로세서가 복잡한 명령 집합을 가진 프로세서보다 훨씬 더 효율적이지 않을까?로 탄생함

ARM유한회사는 RISC 프로세서를 설계하고 라이센싱하는 회사.  
2010년이후 모바일시장이 급격하게 성장하면서 같이 유명해짐.


```
- 메모리, 인터페이스, 라디오, 시스템 온 칩, 시스템 온 모듈 등이 포함된다.

- 임베디드 기기에 주로 사용되는 32bit 프로세서

- RISC 아키텍처가 있는 프로세서는 일반적으로 복잡한 명령 세트 컴퓨팅 (CISC) 아키텍처보다 적은 트랜지스터를 필요로 하여 비용,
 전력소비 및 열 방출을 감소시킨다.

-> 이러한 특성은 스마트폰, 랩탑, 태블릿, 기타 임베디드 시스템과 같은 가볍고 휴대가능한 배터리 전원 장치에 바람직하다
```
## RISC/CISC?
![11](https://github.com/NoRuTnT/practice/assets/114069644/91e48154-536a-4435-9f1b-b45c087fcbc1) <br>
![55](https://github.com/jeonseongjae98/cs-study/assets/114069644/64e5e5fa-fd52-4d7f-aa38-5a2b0b50d754)


```
- RISC(Reduced Instruction Set Computing- 줄여진 명령집합컴퓨터)는 CISC에 비해 명령어구조가
간단하고 명령어 수가 적어 보다 빠르고 효율적으로 처리가 가능

- HOST PC (노트북, 데스크탑)에서 사용하는 대부분의 프로세서는 CISC.(Intel이 개발한 아키텍처 x86이 매우널리쓰임)

- CISC는 열이 많이 발생하기 때문에 반드시 열을 내려주는 냉각팬이 필요하지만 RISC는 필요없다 (부피 감소)

- 따라서 대부분의 임베디드 시스템에서 RISC 아키텍처 선호.

- 지난 20년동안 CISC RISC는 서로의 개념을 조금씩 적용함에따라 경계가 모호해지고있음

- 모바일 AP 업계들이 경쟁적으로 저전력-고성능 CPU 코어를 개발하면서
  ARM 제품군의 절대 성능 자체가 급격하게 올라가는 중
 ex) 랩탑이나 서버, 슈퍼컴퓨터에도 ARM을 사용하여 에너지효율과 속도올리는 케이스발생
```
**심화내용보기**
<details>
<summary>접기/펼치기</summary>

## RISC의 4가지 설계방식
**1. Instructions : 명령어의 복잡도를 줄여 성능을 향상**   
**명령어 RISC 프로세서**는 상대적으로 적은 수의 명령어군을 가지고 있다. 이 명령어
군은 한 사이클에 실행될 수 있는 간단한 연산들을 제공한다. 컴파일러와 프로그래머
는 간단한 명령어 몇 개를 조합하여 복잡한 연산들(예를 들어 나눗셈 연산 등)을 구현
한다. 일정한 길이의 명령어는 파이프라인 구현을 가능케 했는데, 이로써 현재의 명령
어를 해독(decode)하면서 다음 명령어를 읽어(fetch)들일 수 있게 되었다. 반면,
**CISC 프로세서**에서는 명령어의 길이가 고정되어 있지 않으며 한 명령어를 실행하는
데 많은 사이클이 소모된다.   
<br>
**2. Pipelines : 명령어 처리의 속도를 높임**   
파이프라인 명령어는 파이프라인에 의해 병렬로 실행될 수 있는 작은 단계로 쪼개져
실행된다. 이상적인 파이프라인에서는 한 사이클에 각 명령어를 한 단계씩 앞서 처리
하고, 명령어들은 한 파이프라인 단계에서 해독될 수 있다. **CISC 프로세서와 달리**,
마이크로 코드라 불리는 미니 프로그램에 의해 실행될 어떠한 명령어를 필요로 하지
않는다.     
<br>
**3. Registers : 데이터 저장을 위한 거대한 레지스터군을 제공**   
레지스터 RISC 프로세서는 거대한 레지스터군을 가지고 있으며, 이 레지스터에는
데이터와 주소가 저장될 수 있다. 레지스터들은 모든 데이터 처리 동작을 위해 사용되
는 빠른 로컬 메모리처럼 동작한다. 반면, **CISC 프로세서**는 특정 목적을 위한 전용
레지스터들을 가지고 있다.    
<br>
**4. Load-Store architecture 사용**   
로드-스토어(Load-Store) 아키텍처 프로세서는 보통 레지스터 안에 저장되어 있는
데이터를 이용하여 어떤 동작을 수행한다. 메모리에서 레지스터로 데이터를 읽어들일
때에는 로드 명령어를, 레지스터에서 메모리로 데이터를 저장할 때에는 스토어 명령
어를 사용한다. 메모리를 액세스하기 위해서는 비용이 들기 때문에, 메모리를 여러 번
액세스하는 대신, 레지스터 안에 저장되어 있는 데이터를 여러 번 사용하는 식으로,
데이터 처리 동작과 메모리 액세스를 분리하는 것이 좋다.
</details>

## ARM 프로세서의 특징
1. ARM 프로세서는 많은 특징들을 고려하여 설계되었다. 먼저, 휴대형 임베디드 시스템은
일종의 배터리 전력을 요구한다. ARM 프로세서는 **전력 소모를 줄여**, 배터리로 동작할
수 있도록 하기 위해 작은 다이(die) 사이즈로 설계되었다. 이러한 특징은 모바일폰이나
PDA와 같은 어플리케이션에 필수적인 부분이다.
2. 임베디드 시스템은 비용이나 물리적인 크기의 제약으로 제한된 메모리를 가지고 있기
때문에 **코드의 고집적도**는 또 하나의 주요한 요구 사항이다. 모바일폰과 외부 저장 장치
처럼, 제한된 메모리를 보드에 내장하고 있는 어플리케이션들에게 코드의 고집적도는
매우 유용하다.
3.  임베디드 시스템은 가격에 민감하기 때문에 일반적으로 속도가 느린 **저가격의 메
모리 소자**를 사용한다. 특히 디지털 카메라와 같은 대량 생산품들은 저가격의 메모리 소
자를 사용하면 상당한 비용을 절약할 수 있다
4. 임베디드 시스템에서 고려해야 할 또 다른 주요 사항은 임베디드 **프로세서가 차지하는
다이 사이즈를 줄이는 것**이다. 원칩 솔루션을 위해서는, 임베디드 프로세서에 사용되는
면적이 작을수록, 특정한 주변 장치를 위한 공간이 늘어나기 때문이다. 이는 제품을 만
드는 데 칩 외부에 추가로 부착해야 할 필요성을 감소시키기 때문에 설계 및 제조 비용
을 줄일 수 있다.
5. ARM은 **프로세서내에 하드웨어 디버그 기술을 포함**하고 있다. 따라서 소프트웨어 엔지
니어들은 프로세서가 코드를 실행하는 동안 내부에서 어떤 일들이 일어나는지를 살펴볼
수 있다. 이로써 소프트웨어 엔지니어들이 문제점을 더욱 신속히 해결할 수 있기 때문에,
결과적으로 타임 투 마켓(Time-to-Market)에 직접적으로 영향을 주어, 전체적인 개발
비용을 줄여주는 효과를 가져온다.

**심화내용보기**
<details>
<summary>접기/펼치기</summary>

## 임베디드 시스템을 위한 명령어 세트
- **가변 사이클로 실행되는 명령어**   
모든 ARM 명령어가 한 사이클로 실행되지는 않는다.
예를 들어, 다중 로드-스토어(multiple load-store) 명령어는 전송될 레지스터의 수
에 따라 실행 사이클이 달라진다. 데이터 전송은 연속적인 메모리 주소 상에서 이루
어질 수 있는데, 메모리를 연속적으로 액세스하는 것이 랜덤하게 메모리를 액세스하
는 것보다 더 빠르기 때문에 이런 방식의 데이터 전송은 성능을 향상시킨다. 여러 레
지스터의 전송은 일반적으로 함수의 시작과 끝에서 일어나기 때문에 이 또한 코드의
집적도를 향상시킬 수 있다. <br>
- **복잡한 명령어 처리를 위한 인라인 배럴 시프터(Inline Barrel Shifter)**   
인라인 배럴 시프터는 명령어에 의해 사용되기 전에 그 입력 레지스터 중의 하나를 미리 처리해주는
하드웨어 컴포넌트이다. 이것에 의해 코어의 성능과 코드 집적도를 향상시킬 수 있는
많은 명령어들을 포함할 수 있게 되었다. 이러한 특징에 대해서는 2, 3장에서 좀더
자세히 살펴보겠다. <br>
- **16비트 Thumb 명령어**   
ARM은 프로세서 코어에 Thumb이라는 16비트 명령어를 추가하여, ARM 코어가 16비트 명령어 또는 32비트 명령어로 실행될 수 있게 되었
다. 16비트 명령어들은 32비트 고정된 길이의 명령어에 비해 코드 집적도를 약 30%
정도 향상시켜 준다. <br>
- **조건부 실행**<br> 명령어들은 특정 조건이 만족되는 경우에만 실행될 수 있다. 이러한 특
징은 분기 명령어의 사용을 대폭 줄여 성능 향상과 코드 집적도에 향상을 가져왔다. <br>
- **DSP 확장 명령어** <br> 빠른 16×16비트의 곱셈 처리를 지원하기 위해 디지털 신호 처리
(DSP) 확장 명령어가 표준 ARM 명령어군에 추가되었다. 이로써 ARM 프로세서가
더욱 빠르게 수행될 수 있게 됨에 따라, 그동안 프로세서와 DSP를 함께 사용해오던
시스템을 대체하게 되었다. 

</details>


## ARM 하드웨어 임베디드 시스템 아키텍쳐
![22](https://github.com/jeonseongjae98/cs-study/assets/114069644/df66ce83-ac02-4269-b014-3e3af969c58f)

ARM 코어 기반의 전형적인 임베디드 디바이스를 나타내고 있다. 각 블록은 특정한 기능을 수행하는 장치를 의미하고, 사각형 블록을 연결해주는 선은 데이터를 전송
하는 버스를 의미한다. 이 디바이스는 크게 4개의 하드웨어 컴포넌트로 구분할 수 있다.
- **ARM 프로세서** <br>
임베디드 디바이스를 제어한다. ARM 프로세서의 버전이 다양하게 나와 있으므로 원하는 동작 특성에 맞게 선택하여 사용할 수 있다.
ARM 프로세서는 코어(명령어를 처리하고 데이터를 조작하는 실행 엔진)와 버스로 인터페이스되어 있는 주변 장치들로 구성된다.
이들 컴포넌트에는 메모리 관리 장치와 캐시가 포함될 수도 있다.
- **컨트롤러** <br>
시스템에서 주요 기능을 담당하는 블록을 의미한다. 주로 주변에서 많이 볼 수 있는 컨트롤러에는 인터럽트 컨트롤러와 메모리 컨트롤러가 있다.
- **주변 장치** <br>
칩 외부로의 입출력 기능을 제공해주는 컴포넌트로, 임베디드 디바이스의 응용 분야에 영향을 미친다.
- **버스** <br>
주변 장치간의 통신을 담당하는 데 사용된다.

> **ARM 버스 기술**

```
임베디드 시스템은 x86 PC를 위해 설계된 것과는 다른 버스 체계를 사용하고 있다.
가장 일반적인 PC 버스 기술인 PCI(Peripheral Component Interface) 버스는 비디오
카드와 하드디스크 컨트롤러를 x86 프로세서 버스에 연결시켜 준다. 이런 유형의 버스는
칩 외부에 존재하며(버스가 칩 외부의 디바이스에 기계적이고 전자적으로 연결되도록설계됨)
PC의 메인 보드 쪽에 위치한다.
반면 임베디드 디바이스는 칩 내부 버스를 사용하는데, 이 버스는 칩 내부에 위치하여,
다른 주변 장치가 ARM 코어와 내부에서 연결될 수 있도록 해준다.
```

## 소프트웨어 계층 구조
![33](https://github.com/NoRuTnT/practice/assets/114069644/19adc876-1018-4196-a291-5cdd42b3a189) <br>
임베디드 시스템은 구동을 위한 소프트웨어를 필요로 한다.
그림은 임베디드 시스템을 제어하기 위해 필요한 4가지의 전형적인 소프트웨어 컴포넌트를 보여준다.
블록으로 표현되어 있는 각 소프트웨어 컴포넌트는 하드웨어 장치에서 코드를 분리시키기 위해,
높은 수준의 추상 레이어를 사용하고 있다.

- **초기화 코드**는 보드에서 실행되는 첫 번째 코드로, 특정 타겟 또는 특정 타겟 그룹에 대
해 의존적이다. 이것은 운영체제에게 제어권을 넘겨주기 전에 보드의 동작을 위한 최소
한의 부분을 설정한다.
- **운영체제**는 어플리케이션과 하드웨어 시스템 자원을 제어하기 위한 기틀을 마련해준다.
많은 임베디드 시스템은 완전한 운영체제를 필요로 하는 대신, 간단히 태스크 스케줄링
작업을 수행해준다. 
- **디바이스 드라이버**는 그림의 세 번째 컴포넌트로, 하드웨어 장치에 있는 컴포넌트에
대해 일관된 소프트웨어 인터페이스를 제공해준다. 
- **어플리케이션**은 그 장치에 필요한 여러 태스크들 중 하나를 수행한다. 예를
들어, 모바일폰은 일정관리 프로그램을 가지고 있다. 같은 장치 안에서 운영체제의 제어
를 통해 실행되는 여러 어플리케이션이 있을 수 있다. 

## Tip) 하드웨어 기반 보안기술 ARM trustzone ★★★
![44](https://github.com/NoRuTnT/practice/assets/114069644/1fae84c2-ec52-4194-ae55-9d37e563f4dd) <br>
IOT기술의 발달과함께 보안에 대한 위협 또한 함께 증가하고있다.
IT장치들이 인터넷을 통해 외부에 노출됨에따라 모든사물이 해킹의 대상이 될 가능성이 있다.
보안위협에 대비하여  ARM에서 선보인 기술중 하나가 Trustzone.
```
하나의 장치에 분리되 두 개의 환경을 제공하여, 보안이 필요한 정보를 격리된 환경에서 안전하게 보호하는 기술
```
Trustzone은 **일반 수행 영역**인 REE(Rich Execution Environment)와 **보안된 수행 영역**인 TEE(Trusted Execution Environment)로 분리되어서 제공된다.
REE는 임베디드 장치에 일반적으로 올라가는 OS를 바탕으로 구성되어, 별도의 보안을 필요로 하지 않는 어플리케이션이 수행가능한 환경이다.
반대로 TEE는 안전한 영역을 제공하기 위해 GlobalPlatform에서 제공하는 TEE표준에 부합하는 보안OS를 바탕으로 구성된다.
Trustzone 격리화는 CPU,메모리,주소 공간등의 하드웨어 기반 자원을 분리하여 기존의 일반영역에서 행해지던 보안 기술 이외에 하드웨어기반의
격리된 보안 환경을 추가로 제공하여 자원에대한 높은 보안능력을 제공한다.
TEE는 TEE와 REE의 자원 모두에 접근이 가능하고 REE는 오직 REE의 자원에만 접근이 가능하도록 제한되어있다.
만약 REE에서 TEE에 접근하려고 하는 경우 페이지 폴트를 발생시킨다.
```
TEE보안을 위한 부팅 순서 (TEE->REE)
전원이 켜지면 TEE가 먼저 부팅이 이루어짐에따라 REE의 악의적인 소프트웨어가 다른소프트웨어의
작동과정을 변조하는 행위를 미리 파악하고 대비할 수 있다.
```

## 문제

<br>

> 2022년 3회 정보처리기사 실기
1. 아래 설명에 대하여 알맞는 답을 보기에서 고르시오. (객관식 보기복원x)
```
(   1   )은/는 프로세서(processor) 안에 독립적인 보안 구역을 따로 두어 중요한 정보를 보호하는
ARM사에서 개발한 하드웨어 기반의 보안 기술로 프로세서(processor) 안에 독립적인 보안 구역을 별도로 하여,
중요한 정보를 보호하는 하드웨어 기반의 보안 기술이다.
```
<br><br><br><br>

정답 : Trustzone
<br>

> 정보처리기사 필기
2. CISC(Complex Instruction Set Computer)와 RISC(Reduced Instruction Set Computer)에 대한 비교 설명으로
옳지 않은 것은?
```
가. CISC-명령어와 주소지정 방식을 보다 복잡하게 하여 풍부한 기능을 소유하도록한다. RISC-아주 간단한 명령들만
가지고 매우빠르게 동작하도록 한다.
나. CISC-거의 모든 명령어가 레지스터를 대상으로 하며 메모리의 접근은 최소로한다. RISC-처리속도를 증가시키기
위해서 독특한 형태로 다기능을 지원하는 메모리와 레지스터를 대상으로 한다.
다. CISC-명령어의 수가 수백개에서 많게는 1500여개로 매우 다양하다 RISC-명령어의 수가 CISC에 비해서 약 30%
정도며 명령어 형식도 최소한 줄였다.
라. CISC-데이터 경로가 메모리로부터 레지스터,ALU,버스로 연결되는 등 다양하다. RISC-데이터 경로 사이클을 단일화
하며 사이클time을 최소화한다.
```
<br>
<br> 
<br>
정답:2 CISC와 RISC의 설명이바뀜


>컴퓨터시스템응용기술사, 정보처리기술사(사실상 지금은 볼일이없는..)
3. 모바일 및 엠베디드 시스템에 주로 이용되고 있는 ARM(Advanced RISC Machine) 프로세서에 대하여 다음 사항을 설명하시오.

```
가. ARM 프로세서의 특징
나. ARM 하드웨어 임베디드 시스템 아키텍처
다. ARM 소프트웨어 계층 구조
```


출처 및 더 자세히 알아보기 -> http://ael.chungbuk.ac.kr/lectures/undergraduate/%EC%9E%84%EB%B2%A0%EB%94%94%EB%93%9CSW%EC%8B%A4%EC%8A%B5/%EA%B0%95%EC%9D%98%EB%85%B8%ED%8A%B8/01/03-arm-%EC%9E%84%EB%B2%A0%EB%94%94%EB%93%9C%EC%8B%9C%EC%8A%A4%ED%85%9C.pdf
