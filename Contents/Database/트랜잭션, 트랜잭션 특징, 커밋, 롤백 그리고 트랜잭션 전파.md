## 예제로보는 트랜젝션 개념  
> 데이터베이스의 상태를 변화시키기 위해 수행하는 작업 단위  

상태를 변화시킨다는 것 → SQL 질의어를 통해 DB에 접근하는 것
```
- SELECT
- INSERT
- DELETE
- UPDATE
```
작업 단위 → 많은 SQL 명령문들을 사람이 정하는 기준에 따라 정하는 것

![image](https://github.com/NoRuTnT/practice/assets/114069644/6ff6cf46-0901-4a78-bc94-b5538b31ac57)  
![image](https://github.com/NoRuTnT/practice/assets/114069644/bc2fa835-9555-424d-962c-d8fb2c1748b4)  
```
예시) 사용자 J가 사용자 H에게 20만원을 송금한다.

* 이때 DB 작업
- 1. 사용자 J의 계좌에서 20만원을 차감한다 : UPDATE 문을 사용해 사용자 J의 잔고를 변경
- 2. 사용자 H의 계좌에 20만원을 추가한다 : UPDATE 문을 사용해 사용자 H의 잔고를 변경

현재 작업 단위 : 출금 UPDATE문 + 입금 UPDATE문
→ 이를 통틀어 하나의 트랜잭션이라고 한다.
- 위 두 쿼리문 모두 성공적으로 완료되어야만 "하나의 작업(트랜잭션)"이 완료되는 것이다. `Commit`
- 작업 단위에 속하는 쿼리 중 하나라도 실패하면 모든 쿼리문을 취소하고 이전 상태로 돌려놓아야한다. `Rollback`
```
![image](https://github.com/NoRuTnT/practice/assets/114069644/74728d2d-625f-412f-9c15-65a1095bd19a)  
![image](https://github.com/NoRuTnT/practice/assets/114069644/ee2ce7d1-e0b1-4131-9fd4-695b7fb2fc42)  
![image](https://github.com/NoRuTnT/practice/assets/114069644/6524d370-865c-4147-8ab0-a91cd22595ab)  

## 트랜젝션  
> - 단일한 논리적인 작업단위(a single logical unit of work)  
> - 논리적인 이유로 여러 SQL문들을 단일 작업으로 묶어서 나눠질 수 없게 만든것이 transaction 이다.  
> - transaction의 SQL문들 중에 일부만 성공해서 DB에 반영되는 일은 일어나지 않는다.

## COMMIT  
![image](https://github.com/NoRuTnT/practice/assets/114069644/c8f41fe4-eb64-4fc1-a70b-165380321d4e)  
![image](https://github.com/NoRuTnT/practice/assets/114069644/ec1462be-eb2f-4785-803a-6069939a6fc3)  
> - 지금까지 작업한 내용을 DB에 영구적으로 저장하라  
> - transaction을 종료한다.

## ROLLBACK  
30만원을 더 줘보자  
![image](https://github.com/NoRuTnT/practice/assets/114069644/e6c54333-1c3a-4a6e-a079-9811c4bd6bae)  
![image](https://github.com/NoRuTnT/practice/assets/114069644/4ea2ebca-16f0-439e-9f97-d0de9b33b648)  
![image](https://github.com/NoRuTnT/practice/assets/114069644/fa857d3b-341a-40fa-bb0e-391de7542e15)  

> - 지금까지의 작업들을 모두 취소하고 transaction 이전 상태로 되돌린다.
> - transaction을 종료한다.
